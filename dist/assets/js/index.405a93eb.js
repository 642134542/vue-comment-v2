(function(t){function e(e){for(var i,o,r=e[0],c=e[1],d=e[2],h=0,u=[];h<r.length;h++)o=r[h],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&u.push(a[o][0]),a[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(e);while(u.length)u.shift()();return s.push.apply(s,d||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(i=!1)}i&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},a={index:0},s=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var l=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("c31f")},"09d2":function(t,e,n){"use strict";n.r(e);var i=n("e017"),a=n.n(i),s=n("21a1"),o=n.n(s),r=new a.a({id:"icon-ellipse",use:"icon-ellipse-usage",viewBox:"0 0 22 22",content:'<symbol viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-ellipse">\r\n    <path d="M11,0 C17.0751322,0 22,4.92486775 22,11 C22,17.0751322 17.0751322,22 11,22 C4.92486775,22 0,17.0751322 0,11 C0,4.92486775 4.92486775,0 11,0 Z M11,1.3 C5.64283793,1.3 1.3,5.64283793 1.3,11 C1.3,16.3571621 5.64283793,20.7 11,20.7 C16.3571621,20.7 20.7,16.3571621 20.7,11 C20.7,5.64283793 16.3571621,1.3 11,1.3 Z" />\r\n</symbol>'});o.a.add(r);e["default"]=r},1:function(t,e){},"11d8":function(t,e,n){"use strict";n.r(e);var i=n("e017"),a=n.n(i),s=n("21a1"),o=n.n(s),r=new a.a({id:"icon-clean",use:"icon-clean-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-clean"><defs><style type="text/css"></style></defs><path d="M510.54537 60.915371 510.54537 60.915371c27.096125 0 49.049113 21.961174 49.049113 49.048089l0 294.290583c0 27.086915-21.952988 49.048089-49.049113 49.048089l0 0c-27.095102 0-49.048089-21.961174-49.048089-49.048089L461.497281 109.963461C461.497281 82.876546 483.450269 60.915371 510.54537 60.915371z" p-id="11761" fill="#ffffff" /><path d="M248.954537 420.603407l523.18269 0c36.115546 0 65.397453 29.281907 65.397453 65.397453l0 130.794905c0 36.115546-29.281907 65.397453-65.397453 65.397453L248.954537 682.193217c-36.115546 0-65.397453-29.281907-65.397453-65.397453L183.557084 486.000859C183.556061 449.885314 212.838991 420.603407 248.954537 420.603407z" p-id="11762" fill="#ffffff" /><path d="M232.60415 698.543603l0 196.256826c0 36.083823 29.281907 65.334008 65.397453 65.334008l425.087535 0c36.099173 0 65.397453-29.250184 65.397453-65.334008L788.48659 698.543603 232.60415 698.543603zM347.050716 920.538627c0 8.987698-7.249101 16.268522-16.350386 16.268522-9.036817 0-16.349363-7.393387-16.349363-16.268522L314.350966 758.352781c0-8.980535 7.249101-16.268522 16.349363-16.268522 9.036817 0 16.350386 7.398504 16.350386 16.268522L347.050716 920.538627zM461.497281 920.538627c0 8.987698-7.249101 16.268522-16.350386 16.268522-9.036817 0-16.349363-7.393387-16.349363-16.268522L428.797531 758.352781c0-8.980535 7.248078-16.268522 16.349363-16.268522 9.036817 0 16.350386 7.398504 16.350386 16.268522L461.497281 920.538627zM592.293209 920.538627c0 8.987698-7.248078 16.268522-16.349363 16.268522-9.036817 0-16.350386-7.393387-16.350386-16.268522L559.59346 758.352781c0-8.980535 7.249101-16.268522 16.350386-16.268522 9.036817 0 16.349363 7.398504 16.349363 16.268522L592.293209 920.538627zM706.739774 920.538627c0 8.987698-7.249101 16.268522-16.350386 16.268522-9.036817 0-16.349363-7.393387-16.349363-16.268522L674.040025 758.352781c0-8.980535 7.248078-16.268522 16.349363-16.268522 9.036817 0 16.350386 7.398504 16.350386 16.268522L706.739774 920.538627z" p-id="11763" fill="#ffffff" /></symbol>'});o.a.add(r);e["default"]=r},"1a7e":function(t,e,n){"use strict";n.r(e);var i=n("e017"),a=n.n(i),s=n("21a1"),o=n.n(s),r=new a.a({id:"icon-line",use:"icon-line-usage",viewBox:"0 0 1025 1024",content:'<symbol class="icon" viewBox="0 0 1025 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-line"><defs><style type="text/css"></style></defs><path d="M930.263 61.981l31.756 31.756-868.272 868.272-31.756-31.756 868.272-868.272z" p-id="839" fill="#ffffff" /></symbol>'});o.a.add(r);e["default"]=r},2:function(t,e){},"2f13":function(t,e,n){},3:function(t,e){},3741:function(t,e,n){"use strict";n.r(e);var i=n("e017"),a=n.n(i),s=n("21a1"),o=n.n(s),r=new a.a({id:"icon-select",use:"icon-select-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-select"><defs><style type="text/css"></style></defs><path d="M187.5 187.6l693.1 230.7L696 515.4l-76.9 40.5 61.5 61.4L885 821.4l-63.4 63.6-204.2-204.5-61.5-61.6-40.5 77-96.8 184.3L187.5 187.6M155.9 111.9c-4.5 0-9.2 0.7-13.9 2.1-23 7.4-35.4 32-28 55.6l258.4 774.5c3.1 10.8 10.6 20.8 21.4 26.7 6.6 3.6 13.6 5.3 20.6 5.3 15.7 0 30.9-8.7 38.4-23.3l119.2-227 216.4 216.8 2.5 2.2c8.4 8.4 19.6 12.6 30.8 12.6s22.4-4.2 30.7-12.6l92.2-92.5c17.1-17.1 17.1-44.4 0-61.5l-218.9-218.6 226.7-119.2c10-5.6 17.4-13.6 21.1-25.2 7.8-23-5-47.5-27.3-54.9L169 114C164.8 112.6 160.4 111.9 155.9 111.9L155.9 111.9z" p-id="7058" fill="#ffffff" /></symbol>'});o.a.add(r);e["default"]=r},"42b1":function(t,e,n){"use strict";n("f381")},"6e71":function(t,e,n){"use strict";n.r(e);var i=n("e017"),a=n.n(i),s=n("21a1"),o=n.n(s),r=new a.a({id:"icon-exportImg",use:"icon-exportImg-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-exportImg"><defs><style type="text/css"></style></defs><path d="M417.5495168 512.9240576c15.44465067-8.88558933 24.952832-25.30235733 24.952832-43.06152107 0-17.76571733-9.50818133-34.18139307-24.952832-43.06152106a50.04219733 50.04219733 0 0 0-49.88818773 0c-15.44465067 8.880128-24.94737067 25.296896-24.94737067 43.06152106 0 17.760256 9.50272 34.17593173 24.94737067 43.06152107a50.04219733 50.04219733 0 0 0 49.88818773 0zM303.20121173 795.5546112V380.7674368h565.22287787v167.06546347a216.38458027 216.38458027 0 0 1 61.40613973 39.76833706V350.16758613c0-16.89736533-13.75163733-30.59985067-30.703616-30.59985066h-99.53716906l-75.54553174-206.85564587c-5.80539733-15.876096-23.42365867-24.068096-39.35873706-18.29000533L95.85404587 308.00172373c-15.93617067 5.783552-24.15547733 23.34173867-18.35554134 39.2167424l163.36267947 447.28210774c0.278528 0.77550933 0.59528533 1.52917333 0.933888 2.26645333v29.38197333c0 16.89736533 13.746176 30.59438933 30.703616 30.59438934h324.97117867a213.96411733 213.96411733 0 0 1-24.96375467-61.1876864H303.20121173zM241.795072 350.16758613v267.97233494l-96.09106773-263.09536427 531.13869653-192.65071787 57.4029824 157.18045014H272.498688c-16.95744 0-30.703616 13.697024-30.703616 30.59329706zM783.07546453 580.15744c-91.8913024 0-166.3827968 74.23481173-166.3827968 165.80389547C616.69376 837.53478827 691.1852544 911.7696 783.07546453 911.7696c91.88037973 0 166.37733547-74.23481173 166.37733547-165.8093568 0-91.56799147-74.49695573-165.8028032-166.37733547-165.8028032z m97.38540374 175.13731413l-81.13247574 81.7823744v-0.07099733a11.5965952 11.5965952 0 0 1-8.175616 3.35872c-6.41160533 0-11.60533333-5.177344-11.60533333-11.56164267v-33.292288h-84.0105984c-0.91204267 0.229376-1.86231467 0.35498667-2.84535467 0.35498667-6.41160533 0-11.60533333-5.18280533-11.60533333-11.567104v-76.10258773c0-6.38429867 5.193728-11.56164267 11.60533333-11.56164267h86.85595307v-33.50418773c0-6.38976 5.19918933-11.56164267 11.60533333-11.56164267 3.489792 0 6.60821333 1.52917333 8.732672 3.95946667l81.06693974 81.7168384a11.51685973 11.51685973 0 0 1 4.112384 8.82551466c0 3.76832-1.80770133 7.11611733-4.603904 9.224192zM765.1688448 531.13214293l-36.69906773-36.56799573-162.07926614 161.04598187-100.91342506-60.89823574-123.33110614 100.5092864v60.9583104h224.8507392c-0.15837867-3.38602667-0.25122133-6.79389867-0.25122133-10.21815466 0.00546133-113.0430464 87.32453547-205.75791787 198.4233472-214.82919254z" fill="#ffffff" p-id="1416" /></symbol>'});o.a.add(r);e["default"]=r},"737c":function(t,e,n){"use strict";n("93b9")},"76d2":function(t,e,n){"use strict";n.r(e);var i=n("e017"),a=n.n(i),s=n("21a1"),o=n.n(s),r=new a.a({id:"icon-rect",use:"icon-rect-usage",viewBox:"0 0 22 22",content:'<symbol viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-rect">\r\n    <path d="M20.75,0 C21.4403559,-1.26816328e-16 22,0.559644063 22,1.25 L22,20.75 C22,21.4403559 21.4403559,22 20.75,22 L1.25,22 C0.559644063,22 8.45442189e-17,21.4403559 0,20.75 L0,1.25 C-8.45442189e-17,0.559644063 0.559644063,1.26816328e-16 1.25,0 L20.75,0 Z M19.9,1.3 L2.1,1.3 C1.6581722,1.3 1.3,1.6581722 1.3,2.1 L1.3,2.1 L1.3,19.9 C1.3,20.3418278 1.6581722,20.7 2.1,20.7 L2.1,20.7 L19.9,20.7 C20.3418278,20.7 20.7,20.3418278 20.7,19.9 L20.7,19.9 L20.7,2.1 C20.7,1.6581722 20.3418278,1.3 19.9,1.3 L19.9,1.3 Z" />\r\n</symbol>'});o.a.add(r);e["default"]=r},8919:function(t,e,n){"use strict";n.r(e);var i=n("e017"),a=n.n(i),s=n("21a1"),o=n.n(s),r=new a.a({id:"icon-pen",use:"icon-pen-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-pen"><defs><style type="text/css"></style></defs><path d="M258.56 916.48c-30.72 0-64-5.12-92.16-15.36-64-23.04-97.28-69.12-99.84-128-2.56-89.6 66.56-120.32 120.32-143.36 51.2-23.04 79.36-35.84 79.36-74.24 0-46.08-79.36-84.48-112.64-89.6-12.8-5.12-20.48-17.92-20.48-30.72 2.56-12.8 15.36-23.04 28.16-20.48 46.08 7.68 156.16 56.32 156.16 140.8 0 74.24-61.44 99.84-110.08 120.32-56.32 25.6-92.16 43.52-89.6 97.28 0 38.4 23.04 66.56 64 81.92 66.56 25.6 166.4 7.68 192-23.04 10.24-10.24 25.6-12.8 35.84-2.56 10.24 10.24 12.8 25.6 2.56 35.84-25.6 30.72-89.6 51.2-153.6 51.2z" fill="#ffffff" p-id="10373" /><path d="M435.2 757.76c-5.12 5.12 2.56 17.92 12.8 25.6s23.04 10.24 28.16 5.12l107.52-81.92-102.4-74.24-46.08 125.44zM929.28 120.32c-28.16-20.48-69.12-15.36-89.6 15.36L509.44 591.36l102.4 74.24 332.8-455.68c20.48-28.16 12.8-69.12-15.36-89.6z" fill="#ffffff" p-id="10374" /></symbol>'});o.a.add(r);e["default"]=r},"93b9":function(t,e,n){},a1c4:function(t,e,n){"use strict";n.r(e);var i=n("e017"),a=n.n(i),s=n("21a1"),o=n.n(s),r=new a.a({id:"icon-undo",use:"icon-undo-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-undo"><defs><style type="text/css"></style></defs><path d="M0 398.222222L455.111111 0v232.96C1024 369.777778 1024 1024 1024 1024s-199.111111-459.946667-568.888889-459.946667V796.444444z" p-id="11239" fill="#ffffff" /></symbol>'});o.a.add(r);e["default"]=r},bb74:function(t,e,n){"use strict";n.r(e);var i=n("e017"),a=n.n(i),s=n("21a1"),o=n.n(s),r=new a.a({id:"icon-delete",use:"icon-delete-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-delete"><defs><style type="text/css"></style></defs><path d="M517.59 21.609c-100.299 0-181.703 79.514-185.167 179.34H98.603c-25.979 0-47.235 21.099-47.235 47.236 0 25.98 21.099 47.237 47.236 47.237h52.117v528.416c0 99.196 67.233 180.285 150.37 180.285h423.55c82.98 0 150.37-80.616 150.37-180.285V295.737h47.236c25.98 0 47.236-21.1 47.236-47.237 0-25.98-21.099-47.236-47.236-47.236H702.441C699.449 101.124 617.888 21.61 517.59 21.61z m-96.677 179.34c3.464-51.172 45.19-90.85 96.834-90.85s93.37 39.835 96.362 90.85H420.913z m-119.98 714.842c-29.444 0-61.88-37.789-61.88-91.953V295.737h547.311V824.31c0 54.007-32.436 91.954-61.88 91.954H300.933v-0.473z m0 0" p-id="8895" fill="#ffffff" /><path d="M364.387 802.267c21.57 0 39.363-21.571 39.363-48.653V476.022c0-27.082-17.635-48.654-39.363-48.654-21.572 0-39.364 21.572-39.364 48.654v277.592c0 26.924 17.32 48.653 39.364 48.653z m142.496 0c21.571 0 39.363-21.571 39.363-48.653V476.022c0-27.082-17.635-48.654-39.363-48.654-21.571 0-39.364 21.572-39.364 48.654v277.592c0 26.924 17.793 48.653 39.364 48.653z m149.896 0c21.571 0 39.364-21.571 39.364-48.653V476.022c0-27.082-17.635-48.654-39.364-48.654-21.571 0-39.363 21.572-39.363 48.654v277.592c0 26.924 17.162 48.653 39.363 48.653z m0 0" p-id="8896" fill="#ffffff" /></symbol>'});o.a.add(r);e["default"]=r},c10b:function(t,e,n){"use strict";n.r(e);var i=n("e017"),a=n.n(i),s=n("21a1"),o=n.n(s),r=new a.a({id:"icon-exportJson",use:"icon-exportJson-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-exportJson"><defs><style type="text/css"></style></defs><path d="M64 64v896h896V64H64z m0-64h896a64 64 0 0 1 64 64v896a64 64 0 0 1-64 64H64a64 64 0 0 1-64-64V64a64 64 0 0 1 64-64z m416 205.312V846.08a32 32 0 1 0 64 0V205.312a32 32 0 1 0-64 0z m268.032 260.48a32 32 0 0 0 45.248-45.248L512 139.264 230.72 420.544a32 32 0 0 0 45.248 45.248L512 229.76l236.032 236.032z" p-id="841" fill="#ffffff" /></symbol>'});o.a.add(r);e["default"]=r},c31f:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=n("5c96"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("vue-comment",{attrs:{src:t.imgSrc},on:{saveJson:t.saveJson,savePng:t.savePng}})],1)},o=[],r={name:"App",components:{},data:function(){return{imgSrc:""}},created:function(){this.imgSrc=n("f8da")},methods:{saveJson:function(t){console.log("sasa",JSON.stringify(t))},savePng:function(t){var e=document.createElement("a");e.download="ceshi.png",e.href=t,document.body.appendChild(e),e.click(),document.body.removeChild(e)}}},c=r,d=(n("42b1"),n("2877")),l=Object(d["a"])(c,s,o,!1,null,null,null),h=l.exports,u=(n("0fae"),n("5530")),_=(n("d81d"),n("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"draw-canvas"},[n("div",{staticClass:"tool-bar"},[n("ul",{staticClass:"clearfix"},t._l(t.operationList,(function(e){return n("li",{key:e.id,staticClass:"fl d-btn-item"},[n("button",{staticClass:"cd-image--btn",class:{"is-active":e.id===t.current_button_index},attrs:{title:e.name},on:{click:function(n){return t.button_clicked(e.id)}}},[n("svg-icon",{attrs:{"icon-class":e.icon}})],1)])})),0)]),n("div",{staticClass:"canvas-main"},[n("div",{staticClass:"cd-draw-select"},[n("div",{staticClass:"picker_item color_picker"},[n("span",{staticClass:"picker_title"},[t._v("颜色:")]),n("el-color-picker",{attrs:{title:"选择颜色",size:"mini"},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}})],1),n("div",{staticClass:"picker_item size_picker"},[n("span",{staticClass:"picker_title"},[t._v("笔触:")]),n("el-input",{staticClass:"picker_input",attrs:{size:"mini"},model:{value:t.size_input_val,callback:function(e){t.size_input_val=e},expression:"size_input_val"}},[n("el-button",{attrs:{slot:"append",icon:t.show_picker_slider?"el-icon-arrow-up":"el-icon-arrow-down"},on:{click:function(e){e.stopPropagation(),t.show_picker_slider=!t.show_picker_slider}},slot:"append"})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.show_picker_slider,expression:"show_picker_slider"}],staticClass:"picker_slider"},[n("el-slider",{attrs:{"input-size":"mini","show-tooltip":!1,max:t.picker_min_max_size.max,min:t.picker_min_max_size.min},model:{value:t.size_picker_val,callback:function(e){t.size_picker_val=e},expression:"size_picker_val"}})],1)],1)]),n("div",{ref:"draw_wrapper",staticClass:"draw_wrapper",attrs:{id:"drawWrapper"}},[n("canvas",{ref:"canvas",attrs:{id:"canvasId",width:t.canvas_wh.width,height:t.canvas_wh.height}},[t._v("你的浏览器不支持 canvas，请升级你的浏览器")])])])])}),f=[],v=n("1da1"),w=(n("96cf"),n("a9e3"),n("99af"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isExternal?n("div",t._g({staticClass:"svg-external-icon svg-icon",style:t.styleExternalIcon},t.$listeners)):n("svg",t._g({class:t.svgClass,attrs:{"aria-hidden":"true"}},t.$listeners),[n("use",{attrs:{"xlink:href":t.iconName}})])}),m=[];function p(t){return/^(https?:|mailto:|tel:)/.test(t)}var g={name:"SvgIcon",props:{iconClass:{type:String,required:!0},className:{type:String,default:""}},computed:{isExternal:function(){return p(this.iconClass)},iconName:function(){return"#icon-".concat(this.iconClass)},svgClass:function(){return this.className?"svg-icon ".concat(this.className):"svg-icon"},styleExternalIcon:function(){return{mask:"url(".concat(this.iconClass,") no-repeat 50% 50%"),"-webkit-mask":"url(".concat(this.iconClass,") no-repeat 50% 50%")}}}},b=g,x=(n("d960"),Object(d["a"])(b,w,m,!1,null,null,null)),y=x.exports;n("d3b7"),n("ddb0");i["default"].component("svg-icon",y);var C=n("cc05"),k=function(t){return t.keys().map(t)};k(C);var z=n("d4ec"),L=n("bee2"),j=n("ade3"),M=(n("159b"),n("bf19"),n("a15b"),n("cb29"),n("4de4"),n("b1a1")),O=window,E={SELECT:"select",LINE:"line",PEN:"pen",RECT:"rect",CIRCLE:"circle",TEXT:"text",CUSTOM:"custom"},T="#000",I=2,B="#fff",P="rgba(0, 0, 0, 0)",S=16,J=1,N=.2,D=3,H=function(){},R=function(){function t(e){if(Object(z["a"])(this,t),Object(j["a"])(this,"draw_rate",0),Object(j["a"])(this,"window_zoom",O.zoom?O.zoom:1),Object(j["a"])(this,"canvas_zoom",J),Object(j["a"])(this,"canvas_min_zoom",N),Object(j["a"])(this,"canvas_max_zoom",D),Object(j["a"])(this,"canvas",null),Object(j["a"])(this,"fCanvas",null),Object(j["a"])(this,"in_drawing",!1),Object(j["a"])(this,"in_dragging",!1),Object(j["a"])(this,"drag_last_posx",0),Object(j["a"])(this,"drag_last_posy",0),Object(j["a"])(this,"from_mouse_info",{x:0,y:0}),Object(j["a"])(this,"to_mouse_info",{x:0,y:0}),Object(j["a"])(this,"draw_mode",E.SELECT),Object(j["a"])(this,"brush_color",T),Object(j["a"])(this,"brush_width",I),Object(j["a"])(this,"font_size",S),Object(j["a"])(this,"current_draw_obj",null),Object(j["a"])(this,"current_text_obj",null),Object(j["a"])(this,"history",[]),Object(j["a"])(this,"back_event",H),Object(j["a"])(this,"zoom_change",H),Object(j["a"])(this,"drag_event",H),Object(j["a"])(this,"custom_draw_store",[]),!e.canvas)throw new Error("[drawboard] canvas element not found!");this.canvas=e.canvas,this.fCanvas=new M["fabric"].Canvas(this.canvas,{selection:!1,skipTargetFind:!0}),this.init_style(e),this.init_event(),this.set_mode(e.mode||E.PEN),e.back_event&&(this.back_event=e.back_event),e.zoom_change&&(this.zoom_change=e.zoom_change),e.drag_event&&(this.drag_event=e.drag_event),this.enable_select()}return Object(L["a"])(t,[{key:"get_fix_mouse_info",value:function(){var t=this.from_mouse_info,e=this.to_mouse_info,n=this.canvas_zoom,i=this.fCanvas.viewportTransform?this.fCanvas.viewportTransform[4]:0,a=this.fCanvas.viewportTransform?this.fCanvas.viewportTransform[5]:0;return{from:{x:t.x/n-i/n,y:t.y/n-a/n},to:{x:e.x/n-i/n,y:e.y/n-a/n}}}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.fCanvas.clear(),this.current_text_obj=null,this.current_draw_obj=null,t?this.save_state():this.history=[]}},{key:"destroyed",value:function(){this.clear(),this.fCanvas.dispose()}},{key:"init_event",value:function(){var t=this;this.fCanvas.on("mouse:down",(function(e){var n=e.e;if(n.altKey)return t.in_drawing=!1,t.fCanvas.isDrawingMode=!1,t.in_dragging=!0,t.fCanvas.selection=!1,t.fCanvas.skipTargetFind=!0,t.drag_last_posx=n.clientX,t.drag_last_posy=n.clientY,t.drag_event&&t.drag_event(!0),t.current_text_obj&&(t.current_text_obj.exitEditing(),t.current_text_obj=null),n.preventDefault(),void n.stopPropagation();t.save_mouse_info(e),t.in_drawing=!0,t.save_state(),n.preventDefault(),n.stopPropagation()})),this.fCanvas.on("mouse:up",(function(e){var n=e.e;if(t.in_dragging)return t.in_dragging=!1,t.drag_event&&t.drag_event(!1),n.preventDefault(),void n.stopPropagation();t.save_mouse_info(e,!1),t.draw_in_up(),t.current_draw_obj=null,t.in_drawing=!1,n.preventDefault(),n.stopPropagation()})),this.fCanvas.on("mouse:move",(function(e){var n=e.e;if(t.in_dragging){if(!t.fCanvas.viewportTransform)return;var i=t.fCanvas.viewportTransform[4]+n.clientX-t.drag_last_posx,a=t.fCanvas.viewportTransform[5]+n.clientY-t.drag_last_posy;return t.fCanvas.viewportTransform[4]=i,t.fCanvas.viewportTransform[5]=a,t.drag_last_posx=n.clientX,t.drag_last_posy=n.clientY,t.fCanvas.requestRenderAll(),n.preventDefault(),void n.stopPropagation()}(t.draw_rate%2===0||t.in_drawing)&&(t.save_mouse_info(e,!1),t.draw_in_move(),t.draw_rate++,n.preventDefault(),n.stopPropagation())})),this.fCanvas.on("mouse:wheel",(function(t){}))}},{key:"init_style",value:function(t){this.fCanvas.setBackgroundColor(t.background_color||B,(function(){})),this.set_brush({color:t.brush_color||T,width:t.brush_width||I})}},{key:"set_brush",value:function(t){var e=t.color,n=t.width;e&&(this.fCanvas.freeDrawingBrush.color=e,this.brush_color=e),n&&(this.fCanvas.freeDrawingBrush.width=n,this.brush_width=n)}},{key:"set_min_zoom",value:function(t){this.canvas_min_zoom=t}},{key:"set_max_zoom",value:function(t){this.canvas_max_zoom=t}},{key:"set_font_size",value:function(t){this.font_size=t}},{key:"set_mode",value:function(t){switch(this.in_drawing=!1,this.fCanvas.isDrawingMode=!1,this.draw_mode=t,t){case E.PEN:break;case E.SELECT:this.fCanvas.selection=!0,this.fCanvas.skipTargetFind=!1;break;default:this.fCanvas.skipTargetFind=!0,this.fCanvas.selection=!1}this.current_text_obj&&(this.current_text_obj.exitEditing(),this.current_text_obj=null)}},{key:"enable_select",value:function(){this.set_mode(E.SELECT)}},{key:"delete_selected",value:function(){var t=this,e=this.fCanvas.getActiveObjects();e&&e.length&&e.forEach((function(e){t.fCanvas.remove(e)}))}},{key:"back",value:function(){var t=this;if(this.back_event&&this.back_event(this.history),this.history.length){this.current_text_obj&&this.current_text_obj.exitEditing(),this.current_text_obj=null,this.current_draw_obj=null;var e=this.history.pop();this.fCanvas.loadFromJSON(e,(function(){t.fCanvas.renderAll()}))}else this.clear()}},{key:"to_img",value:function(t){this.canvas_zoom=J,this.fCanvas.setZoom(t||this.canvas_zoom),this.drag_last_posx=0,this.drag_last_posy=0,this.fCanvas.viewportTransform&&(this.fCanvas.viewportTransform[4]=0,this.fCanvas.viewportTransform[5]=0);var e=Math.floor(1/t*100)/100,n={format:"jpeg",quality:1,multiplier:e};return console.log("to_img: ",t,n),this.fCanvas.toDataURL(n)}},{key:"set_text",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.draw_text(t);this.fCanvas.add(n),e&&this.save_state()}},{key:"set_bg_img",value:function(t){var e=this,n=t.src,i=void 0===n?"":n,a=t.catch,s=t.finish,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Image;r.src=i,r.crossOrigin="anonymous",r.onload=function(){M["fabric"].Image.fromURL(i,(function(t){e.fCanvas.setBackgroundImage(t,e.fCanvas.renderAll.bind(e.fCanvas)),e.fCanvas.requestRenderAll(),o&&e.save_state(),s&&s(i)}),{crossOrigin:"anonymous"})},r.onerror=function(){a&&a(i),s&&s(i)}}},{key:"save_mouse_info",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.e.offsetX/this.window_zoom,i=t.e.offsetY/this.window_zoom;e?this.from_mouse_info={x:n,y:i}:this.to_mouse_info={x:n,y:i}}},{key:"save_state",value:function(){var t=this.fCanvas.toJSON();this.history.push(t)}},{key:"draw_in_move",value:function(){if(this.in_drawing){this.current_draw_obj&&this.fCanvas.remove(this.current_draw_obj);var t=null;switch(this.fCanvas.isDrawingMode=!1,this.draw_mode){case E.RECT:t=this.draw_rect();break;case E.CIRCLE:t=this.draw_circle();break;case E.LINE:t=this.draw_line();break;case E.PEN:this.draw_pen();break;case E.CUSTOM:this.call_custom_draw_funcs("move");break}t&&(this.fCanvas.add(t),this.current_draw_obj=t)}}},{key:"draw_in_up",value:function(){if(this.in_drawing){var t=null;switch(this.draw_mode){case E.TEXT:t=this.draw_text({edit:!0}),console.log(t);break;case E.CUSTOM:this.call_custom_draw_funcs("up");break}t&&(this.fCanvas.add(t),this.current_draw_obj=t)}}},{key:"draw_rect",value:function(){var t=this.get_fix_mouse_info(),e=t.from.x,n=t.from.y,i=t.to.x,a=t.to.y;return i-e<0&&(e=t.to.x,i=t.from.x),a-n<0&&(n=t.to.y,a=t.from.y),new M["fabric"].Rect({left:e,top:n,fill:P,width:Math.abs(i-e),height:Math.abs(a-n),stroke:this.brush_color,strokeWidth:this.brush_width})}},{key:"draw_line",value:function(){var t=this.get_fix_mouse_info(),e=[t.from.x,t.from.y,t.to.x,t.to.y];return new M["fabric"].Line(e,{stroke:this.brush_color,strokeWidth:this.brush_width})}},{key:"draw_pen",value:function(){this.draw_mode===E.PEN&&(this.fCanvas.isDrawingMode=!0)}},{key:"draw_circle",value:function(){var t=this.get_fix_mouse_info(),e=t.from.x,n=t.from.y,i=t.to.x,a=t.to.y;i-e<0&&(e=t.to.x,i=t.from.x),a-n<0&&(n=t.to.y,a=t.from.y);var s=Math.abs(i-e),o=Math.abs(a-n),r=Math.sqrt(s*s+o*o)/2;return new M["fabric"].Circle({left:e,top:n,radius:r,fill:P,stroke:this.brush_color,strokeWidth:this.brush_width})}},{key:"draw_text",value:function(t){var e=t.left,n=t.top,i=t.width,a=void 0===i?150:i,s=t.text,o=void 0===s?[""]:s,r=t.edit,c=void 0!==r&&r,d=t.color,l=t.font_size,h=t.angle,u=void 0===h?0:h,_=this.get_fix_mouse_info(),f=e||_.from.x,v=n||_.from.y;if(this.current_text_obj){this.current_text_obj.exitEditing();var w=this.current_text_obj.text||"";w.length||this.fCanvas.remove(this.current_text_obj)}var m=u>0?100:0,p=l||this.font_size;return this.current_text_obj=new M["fabric"].Textbox(o.join("\n"),{angle:u,left:f+m,top:v+m,width:a,fill:d||this.brush_color,fontSize:p,hasControls:!0,fontFamily:"Microsoft YaHei"}),c&&(this.current_text_obj.enterEditing(),this.current_text_obj.hiddenTextarea&&this.current_text_obj.hiddenTextarea.focus()),this.current_text_obj}},{key:"draw_path",value:function(t){var e=t.path,n=t.stroke,i=t.stroke_width,a=t.fill,s=void 0===a?P:a;if(!e)throw new Error("[drawboard] draw path error");var o=n||this.brush_color,r=i||this.brush_width;return new M["fabric"].Path(e,{stroke:o,strokeWidth:r,fill:s})}},{key:"call_custom_draw_funcs",value:function(t){var e=this,n=this.custom_draw_store.filter((function(e){return e.enable&&e.event===t})),i=this.get_fix_mouse_info();n.forEach((function(t){var n=null;"path"===t.type?n=e.draw_path(t.get_draw_path_options(i.from,i.to,e.brush_width,e.canvas_zoom)):"text"===t.type&&(n=e.draw_text(t.get_draw_text_options(e.font_size,e.canvas_zoom))),n&&(e.fCanvas.add(n),e.current_draw_obj=n)}))}},{key:"register_custom_draw_func",value:function(t){var e=t.name,n=t.type,i=void 0===n?"path":n,a=t.get_draw_path_options,s=t.get_draw_text_options,o=t.event,r=void 0===o?"move":o,c=t.enable,d=void 0!==c&&c;if(!e)throw new Error("[drawboard] register_custom_draw_func error (name not found)");if("path"===i){if(!a)throw new Error("[drawboard] register_custom_draw_func error (path get_draw_path_options not found)");this.custom_draw_store.push({name:e,type:i,get_draw_path_options:a,event:r,enable:d})}if("text"===i){if(!s)throw new Error("[drawboard] register_custom_draw_func error (text get_draw_text_options not found)");this.custom_draw_store.push({name:e,type:i,get_draw_text_options:s,event:r,enable:d})}}},{key:"set_custom_draw_func_enable",value:function(t){this.set_mode(E.CUSTOM),this.custom_draw_store.forEach((function(e){-1!==t.indexOf(e.name)?e.enable=!0:e.enable=!1}))}},{key:"set_zoom",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t;i>this.canvas_max_zoom&&(i=this.canvas_max_zoom),i<this.canvas_min_zoom&&(i=this.canvas_min_zoom),this.canvas_zoom=i,e||this.zoom_change&&this.zoom_change(this.canvas_zoom),this.fCanvas.setZoom(this.canvas_zoom),n&&this.fCanvas.viewportTransform&&(this.fCanvas.viewportTransform[4]=0,this.fCanvas.viewportTransform[5]=0)}},{key:"check_mouse_is_in_draw_area",value:function(t,e){var n=this.fCanvas.getWidth()*this.canvas_zoom,i=this.fCanvas.getHeight()*this.canvas_zoom;return!this.fCanvas.viewportTransform||!(t<this.fCanvas.viewportTransform[4]||e<this.fCanvas.viewportTransform[5]||t>this.fCanvas.viewportTransform[4]+n||e>this.fCanvas.viewportTransform[5]+i)}},{key:"exportCanvas",value:function(){var t=this.fCanvas.toDataURL({width:this.fCanvas.width,height:this.fCanvas.height,left:0,top:0,format:"png"});return new Promise((function(e){e(t)})).catch()}},{key:"exportToJson",value:function(){var t=this.fCanvas.toJSON();return new Promise((function(e){e(t)})).catch()}},{key:"initJson",value:function(t){var e=this;this.fCanvas.loadFromJSON(t,(function(){e.fCanvas.renderAll()}))}}]),t}(),V=2;function W(t,e){e.register_custom_draw_func({name:t,get_draw_path_options:function(t,e,n){var i=1;n>V&&(i=n/V);var a=30,s=10,o=180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI*1,r=(o+a)*Math.PI/180*1,c=(o-a)*Math.PI/180*1,d=s*Math.cos(r)*i,l=s*Math.sin(r)*i,h=s*Math.cos(c)*i,u=s*Math.sin(c)*i,_=t.x-d,f=t.y-l,v=" M "+t.x+" "+t.y;return v+=" L "+e.x+" "+e.y,_=e.x+d,f=e.y+l,v+=" M "+_+" "+f,v+=" L "+e.x+" "+e.y,_=e.x+h,f=e.y+u,v+=" L "+_+" "+f,{path:v}}})}function Z(t){return new Promise((function(e){var n=new Image;n.src=t,n.onload=function(){return e({naturalWidth:n.width,naturalHeight:n.height})},n.onerror=function(){return e({naturalWidth:0,naturalHeight:0})}}))}var $=100,U=0,F=100,A="#FF0000",X=32,q=128,Y=16,K=4,G=32,Q=4,tt={name:"vueComment",components:{SvgIcon:y},props:{src:{type:String},jsonData:{type:Object}},data:function(){return{operationList:[{id:100,name:"选择",icon:"select"},{id:1,name:"方框",icon:"rect"},{id:2,name:"圆形",icon:"ellipse"},{id:3,name:"箭头",icon:"arrow"},{id:4,name:"画线",icon:"line"},{id:5,name:"画笔",icon:"pen"},{id:6,name:"文本",icon:"text"},{id:7,name:"删除",icon:"delete"},{id:50,name:"撤销",icon:"undo"},{id:51,name:"清屏",icon:"clean"},{id:52,name:"导出图片",icon:"exportImg"},{id:53,name:"导出json",icon:"exportJson"}],img_loading:!1,drawboard:null,current_button_index:100,color:A,in_move_mode:!1,rotate_angle:U,init_zoom:F/100,zoom:F,font_size:X,canvas_wh:{width:1e3,height:450},brush_width:K,rotate_dialog:!1,rotate_dialog_checked:!1,current_size_mode_is_font:!1,size_input_val:K,size_picker_val:K,show_picker_slider:!1,init_state:{is_img:!1,img_check:!0,data:""}}},created:function(){},watch:{color:{handler:function(){this.drawboard&&this.drawboard.set_brush({color:this.color,width:this.brush_width})}},brush_width:{handler:function(){this.drawboard&&this.set_zoom_size()}},font_size:{handler:function(){this.drawboard&&this.set_zoom_size()}},size_input_val:{handler:function(){this.size_picker_val=Number(this.size_input_val)}},size_picker_val:{handler:function(){this.size_input_val=this.size_picker_val,this.current_size_mode_is_font?this.font_size=this.size_picker_val:this.brush_width=this.size_picker_val}},current_button_index:{handler:function(){this.current_size_mode_is_font=-1!==[6].indexOf(this.current_button_index)}},current_size_mode_is_font:{handler:function(t){this.size_input_val=t?this.font_size:this.brush_width}},src:{handler:function(){var t=this;this.$nextTick((function(){t.imgUrl=t.src,t.draw(t.imgUrl)}))},immediate:!0},jsonData:{handler:function(){this.restoreJson(this.jsonData)}}},computed:{picker_min_max_size:function(){return this.current_size_mode_is_font?{min:Y,max:q}:{min:Q,max:G}}},mounted:function(){this.delete_event=this.delete_handler.bind(this),window.addEventListener("keyup",this.delete_event)},destroyed:function(){window.removeEventListener("keyup",this.delete_event),this.drawboard&&this.drawboard.destroyed()},methods:{initDataCanvas:function(t){console.log("data",t),this.destroy_drawboard(),this.init_drawboard(!0,t)},init_drawboard:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0;if(!this.drawboard){var i=this.$refs.canvas;i?(this.drawboard=new R({canvas:document.getElementById("canvasId"),brush_color:this.color,brush_width:K,mode:E.PEN,back_event:function(e){e.length||(t.$message.warning("没有可撤销的记录了"),t.destroy_drawboard(),t.draw_init_state())},zoom_change:function(e){var n=e/t.init_zoom;t.zoom=parseInt("".concat(100*n),10),t.set_zoom_size()},drag_event:function(e){e&&(t.in_move_mode=!1)}}),console.log("this.drawboard",this.drawboard),this.current_button_index=$,this.register_custom_draw_func(),e&&(this.drawboard.set_min_zoom(.2*this.init_zoom),this.drawboard.set_max_zoom(3*this.init_zoom),this.drawboard.set_zoom(this.init_zoom),this.drawboard.initJson(n),this.init_state.is_img=!0,this.init_state.img_check=!0,this.init_state.data=n.backgroundImage.src)):console.error("[draw-dialog] canvas not found!")}},draw:function(t){var e=document.getElementById("drawWrapper"),n=e.offsetHeight,i=e.offsetWidth;this.canvas_wh={width:i,height:n},this.set_img(t)},restoreJson:function(t){var e=this,n=document.getElementById("drawWrapper"),i=n.offsetHeight,a=n.offsetWidth;this.canvas_wh={width:a,height:i},this.destroy_drawboard(),Z(t.backgroundImage.src).then((function(n){var i=n.naturalWidth,a=n.naturalHeight,s=i/a,o=e.canvas_wh.width,r=e.canvas_wh.height;e.canvas_wh.height*s>e.canvas_wh.width?r=e.canvas_wh.width/s:o=e.canvas_wh.height*s,o=Math.min(o,i),r=Math.min(r,a),document.getElementById("canvasId").width=o,document.getElementById("canvasId").height=r;var c=1;i>e.canvas_wh.width&&(c=o/i),e.init_zoom=c,e.init_drawboard(!0,t)}))},set_img:function(t){var e=arguments,n=this;return Object(v["a"])(regeneratorRuntime.mark((function i(){var a,s,o,r,c,d,l,h,u,_,f,v,w;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=e.length>1&&void 0!==e[1]?e[1]:U,s=!(e.length>2&&void 0!==e[2])||e[2],n.img_loading=!0,o=t,console.log("draw_dialog url: ",t,o),r=function(){console.warn("drawing_board load image error ",o),n.drawboard.set_text({text:["图片加载失败:   "+o],left:15,top:15,color:"red"})},c=function(){n.img_loading=!1},i.prev=7,i.next=10,Z(o);case 10:return d=i.sent,l=d.naturalWidth,h=d.naturalHeight,console.log("naturalWidth, naturalHeight",l,h),u=l/h,_=n.canvas_wh.width,f=n.canvas_wh.height,n.canvas_wh.height*u>n.canvas_wh.width?f=n.canvas_wh.width/u:_=n.canvas_wh.height*u,_=Math.min(_,l),f=Math.min(f,h),document.getElementById("canvasId").width=_,document.getElementById("canvasId").height=f,90!==a&&270!==a||(v=l,l=h,h=v),w=1,l>n.canvas_wh.width&&(w=_/l),n.init_zoom=w,i.next=28,n.reset_canvas();case 28:if(n.drawboard){i.next=31;break}return c(),i.abrupt("return");case 31:n.drawboard&&(n.drawboard.set_bg_img({src:o,angle:a,catch:r,finish:c}),n.drawboard.set_min_zoom(.2*w),n.drawboard.set_max_zoom(3*w),n.drawboard.set_zoom(w)),i.next=39;break;case 34:i.prev=34,i.t0=i["catch"](7),n.reset_canvas(),r(),c();case 39:n.init_state.is_img=!0,n.init_state.img_check=s,n.init_state.data=t;case 42:case"end":return i.stop()}}),i,null,[[7,34]])})))()},register_custom_draw_func:function(){this.drawboard&&W("箭头",this.drawboard)},set_zoom_size:function(){if(this.drawboard){var t=this.zoom/100;this.drawboard.set_brush({width:this.brush_width/t}),this.drawboard.set_font_size(this.font_size/t),console.log("'当前比例: ".concat(t,"; 当前线宽: ").concat(this.brush_width,"/").concat(this.brush_width/t,"; 字体为: ").concat(this.font_size,"/").concat(this.font_size/t))}},draw_init_state:function(){this.init_state.is_img&&this.set_img(this.init_state.data,this.rotate_angle,this.init_state.img_check)},delete_handler:function(t){t.preventDefault(),t.stopPropagation(),46===t.keyCode&&this.delete_selected()},delete_selected:function(){this.drawboard&&this.drawboard.delete_selected()},reset_canvas:function(){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$nextTick();case 2:t.destroy_drawboard(),t.init_drawboard();case 4:case"end":return e.stop()}}),e)})))()},destroy_drawboard:function(){this.drawboard&&this.drawboard.destroyed(),this.drawboard=null},change_move_mode:function(){this.drawboard&&(this.in_move_mode=!this.in_move_mode,this.in_move_mode?this.drawboard.enable_select():this.button_clicked(this.current_button_index))},button_clicked:function(t){if(this.drawboard)switch(this.in_move_mode&&-1===[50,51].indexOf(t)&&(this.in_move_mode=!1),t){case 100:this.change_move_mode(),this.current_button_index=t;break;case 1:this.drawboard.set_mode(E.RECT),this.current_button_index=t;break;case 2:this.drawboard.set_mode(E.CIRCLE),this.current_button_index=t;break;case 3:this.drawboard.set_custom_draw_func_enable(["箭头"]),this.current_button_index=t;break;case 4:this.drawboard.set_mode(E.LINE),this.current_button_index=t;break;case 5:this.drawboard.set_mode(E.PEN),this.current_button_index=t;break;case 6:this.drawboard.set_mode(E.TEXT),this.current_button_index=t;break;case 7:this.delete_selected();break;case 50:this.drawboard.back();break;case 51:this.drawboard.clear(),this.draw_init_state();break;case 52:this.exportToImage();break;case 53:this.exportToJson();break}},exportToImage:function(){var t=this;this.drawboard.exportCanvas().then((function(e){t.$emit("savePng",e)}))},exportToJson:function(){var t=this;this.drawboard.exportToJson().then((function(e){t.$emit("saveJson",e)}))}}},et=tt,nt=(n("737c"),Object(d["a"])(et,_,f,!1,null,null,null)),it=nt.exports;it.install=function(t){t.component(it.name,it)};var at=it,st=[at],ot=function t(e){t.installed||(t.installed=!0,st.map((function(t){return e.component(t.name,t)})))};"undefined"!==typeof window&&window.Vue&&ot(window.Vue);var rt=Object(u["a"])({install:ot},st);i["default"].config.productionTip=!1,i["default"].use(a["Input"]),i["default"].use(a["ColorPicker"]),i["default"].use(a["Slider"]),i["default"].use(a["Button"]),i["default"].use(rt),new i["default"]({render:function(t){return t(h)}}).$mount("#app")},cc05:function(t,e,n){var i={"./arrow.svg":"e2d0","./clean.svg":"11d8","./delete.svg":"bb74","./ellipse.svg":"09d2","./exportImg.svg":"6e71","./exportJson.svg":"c10b","./line.svg":"1a7e","./pen.svg":"8919","./rect.svg":"76d2","./select.svg":"3741","./text.svg":"e546","./undo.svg":"a1c4","./zoomIn.svg":"ea18","./zoomOut.svg":"fa26"};function a(t){var e=s(t);return n(e)}function s(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}a.keys=function(){return Object.keys(i)},a.resolve=s,t.exports=a,a.id="cc05"},d960:function(t,e,n){"use strict";n("2f13")},e2d0:function(t,e,n){"use strict";n.r(e);var i=n("e017"),a=n.n(i),s=n("21a1"),o=n.n(s),r=new a.a({id:"icon-arrow",use:"icon-arrow-usage",viewBox:"0 0 19 16",content:'<symbol viewBox="0 0 19 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-arrow">\r\n    <g id="icon-arrow_信息采集-涉案视图备份" transform="translate(-1043.000000, -179.000000)">\r\n        <g id="icon-arrow_编组-9" transform="translate(120.000000, 136.000000)">\r\n            <g id="icon-arrow_编组-14" transform="translate(903.000000, 30.000000)">\r\n                <g id="icon-arrow_箭头标记" transform="translate(29.622645, 20.328030) rotate(-41.000000) translate(-29.622645, -20.328030) translate(17.122645, 17.328030)">\r\n                    <polygon id="icon-arrow_路径" points="0.348394823 2.64431238 20.5353107 2.64431238 20.5353107 3.74431238 0.348394823 3.74431238" />\r\n                    <path d="M23.3165131,3.77774491 L19.5633481,5.9751535 L19.5633481,0.775153502 L23.3115121,2.91188464 C23.5514107,3.0486446 23.6350211,3.35398667 23.4982611,3.59388524 C23.4548443,3.67004518 23.3921664,3.73345128 23.3165131,3.77774491 Z" id="icon-arrow_路径" />\r\n                </g>\r\n            </g>\r\n        </g>\r\n    </g>\r\n</symbol>'});o.a.add(r);e["default"]=r},e546:function(t,e,n){"use strict";n.r(e);var i=n("e017"),a=n.n(i),s=n("21a1"),o=n.n(s),r=new a.a({id:"icon-text",use:"icon-text-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-text"><defs><style type="text/css"></style></defs><path d="M851.968 167.936l0 109.568-281.6 0 0 587.776-116.736 0 0-587.776-281.6 0 0-109.568 679.936 0z" p-id="9355" data-spm-anchor-id="a313x.7781069.0.i11" class="selected" fill="#ffffff" /></symbol>'});o.a.add(r);e["default"]=r},ea18:function(t,e,n){"use strict";n.r(e);var i=n("e017"),a=n.n(i),s=n("21a1"),o=n.n(s),r=new a.a({id:"icon-zoomIn",use:"icon-zoomIn-usage",viewBox:"0 0 18 18",content:'<symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-zoomIn">\r\n    <path d="M13.949194,2.40913246 C10.7576998,-0.780851127 5.58486737,-0.780851127 2.39337313,2.40913246 C0.860937608,3.94126683 -1.02671023e-06,6.01946773 -1.02671023e-06,8.1864459 C-1.02671023e-06,10.3534241 0.860937608,12.431625 2.39337313,13.9637593 C5.43956949,17.0115249 10.3295252,17.1683212 13.5647164,14.3219683 L17.1706866,17.9279384 L17.9109851,17.1876399 L14.307403,13.5864459 C17.1525779,10.3490368 16.9958426,5.45889505 13.949194,2.41032649 L13.949194,2.40913246 Z M14.7718806,10.870028 C14.4136716,11.7536101 13.8859104,12.5464459 13.2053134,13.2246549 C11.8722859,14.5638443 10.0596342,15.3152114 8.17008955,15.3118586 C6.27996521,15.3181432 4.46622867,14.5663264 3.13486567,13.2246549 C2.46073913,12.5526763 1.92806862,11.7524525 1.5682985,10.871222 C1.22312213,10.0197419 1.04632689,9.10940858 1.04766192,8.19062499 C1.0413773,6.30050066 1.79319411,4.48676411 3.13486567,3.15540112 C3.80684423,2.48127458 4.60706798,1.94860407 5.48829851,1.58883395 C6.33997912,1.24265938 7.2507441,1.06504804 8.17008955,1.06584618 C9.0966567,1.06584618 9.99695522,1.24137126 10.8518806,1.58763993 C11.7342687,1.94584889 12.5271045,2.47241605 13.2053134,3.15301307 C14.544797,4.48633223 15.2961886,6.29947263 15.2925013,8.18943098 C15.2948554,9.10831003 15.1180229,10.0188348 14.7718806,10.870028 L14.7718806,10.870028 Z M12.2882985,8.76495336 L8.62262687,8.76495336 L8.62262687,12.430625 L7.57546268,12.430625 L7.57546268,8.76495336 L3.90979105,8.76495336 L3.90979105,7.71898321 L7.57546268,7.71898321 L7.57546268,4.05331156 L8.62262687,4.05331156 L8.62262687,7.71898321 L12.2882985,7.71898321 L12.2882985,8.76614739 L12.2882985,8.76495336 Z" id="icon-zoomIn_形状" />\r\n</symbol>'});o.a.add(r);e["default"]=r},f381:function(t,e,n){},f8da:function(t,e,n){t.exports=n.p+"assets/img/bizhi.9c0f8cb2.jpg"},fa26:function(t,e,n){"use strict";n.r(e);var i=n("e017"),a=n.n(i),s=n("21a1"),o=n.n(s),r=new a.a({id:"icon-zoomOut",use:"icon-zoomOut-usage",viewBox:"0 0 18 18",content:'<symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-zoomOut">\r\n    <path d="M14.0000269,2.40217747 C10.7971685,-0.798320761 5.60681191,-0.798320761 2.40395354,2.40217747 C0.866223444,3.9394278 0.00229532687,6.02467465 0.00229532687,8.19901419 C0.00229532687,10.3733537 0.866223444,12.4586006 2.40395354,13.9958509 C5.46052327,17.0541 10.367162,17.2116671 13.6136511,14.3558284 L17.2314243,17.9736016 L17.9753777,17.2296483 L14.3600043,13.6178746 C17.2160147,10.3691923 17.058483,5.46102987 14.0000269,2.40217747 L14.0000269,2.40217747 Z M14.8243752,10.8928454 C14.4643977,11.7783899 13.9364308,12.57394 13.2524737,13.2542974 C11.9152024,14.5981652 10.0966452,15.3523696 8.20079026,15.349375 C7.27825175,15.3507106 6.3642166,15.1730381 5.50935893,14.8261989 C4.62428009,14.4668014 3.82102826,13.9321165 3.14790692,13.2542974 C2.47151195,12.5800064 1.93703156,11.7770618 1.57600542,10.8928454 C1.22957689,10.0379058 1.05231249,9.1238735 1.0539911,8.20141404 C1.04713297,6.30490801 1.80092925,4.4848185 3.14670698,3.1485307 C3.82099801,2.47213573 4.6239426,1.93765534 5.50815901,1.57662919 C6.36355456,1.23045893 7.27800628,1.05359973 8.20079026,1.0558404 C9.13073198,1.0558404 10.0342754,1.23225077 10.8910217,1.57902905 C11.7765662,1.93900649 12.5733162,2.46697341 13.2536736,3.15093053 C14.5971012,4.48839945 15.3508635,6.30693212 15.3475655,8.20261397 C15.3498964,9.12524866 15.1721864,10.0394766 14.8243752,10.8940453 L14.8243752,10.8928454 Z M12.3333313,8.78097772 L3.92665811,8.78097772 L3.92665811,7.72864367 L12.3345312,7.72864367 L12.3345312,8.7797778 L12.3333313,8.78097772 Z" id="icon-zoomOut_形状" />\r\n</symbol>'});o.a.add(r);e["default"]=r}});